(function(){function t(t){function e(t,e){const a=i.querySelector(t);a&&e(a)}function a(t){const e=L[t];if(!e)return void console.error("Track item is undefined. Index:",t);const a=e.getAttribute("data-audioplayer-track-url");if(!a)return void console.error("Track URL is missing for index:",t);E.src=a;const r=e.querySelector('[data-audioplayer-track="cover"]'),o=e.querySelector('[data-audioplayer-track="title"]'),n=e.querySelector('[data-audioplayer-track="artist"]');p&&r?p.src=r.src:console.log("Track image not found for index:",t),o?y.textContent=o.textContent:console.log("Track title not found for index:",t),n?v.textContent=n.textContent:console.log("Artist title not found for index:",t),f.setAttribute("data-audioplayer-current-state","pause")}function r(t){A=t,a(t),E.play().then(()=>{f.setAttribute("data-audioplayer-current-state","play")}).catch(t=>{})}function o(){E.loop=!1,k.classList.toggle("active"),E.onended=(()=>{k.classList.contains("active")&&(A=(A+1)%L.length,r(A))})}function n(){g.setAttribute("data-audioplayer-repeat-track","true"),E.loop=g.getAttribute("data-audioplayer-repeat-track").contains("active")}function l(){E.volume=m.value/100}function d(){E.muted=!E.muted,E.muted?q.setAttribute("data-audioplayer-muted","true"):q.setAttribute("data-audioplayer-muted","false")}function u(){const t=E.duration;t>0&&(S.value=E.currentTime/t*100)}function c(t){const e=S.getBoundingClientRect(),a=(t.clientX-e.left)/e.width*E.duration;E.currentTime=a}const i=t.querySelector("[data-audioplayer-controls]"),s=t.querySelector("[data-audioplayer-playlist]"),p=t.querySelector('[data-audioplayer-current="cover"]'),y=t.querySelector('[data-audioplayer-current="title"]'),v=t.querySelector('[data-audioplayer-current="artist"]'),f=i.querySelector('[data-audioplayer-control="play-pause"]'),k=(i.querySelector('[data-audioplayer-control="prev"]'),i.querySelector('[data-audioplayer-control="next"]'),i.querySelector('[data-audioplayer-control="repeat-playlist"]')),g=i.querySelector('[data-audioplayer-control="repeat-track"]'),m=i.querySelector('[data-audioplayer-control="volume"]'),q=i.querySelector('[data-audioplayer-control="mute-unmute"]'),S=i.querySelector('[data-audioplayer-control="progress-bar"]'),L=Array.from(s.querySelectorAll("[data-audioplayer-track][data-audioplayer-track-url]"));let A=0,E=new Audio;L.forEach((t,e)=>{t.addEventListener("click",()=>{A=e,a(e),f.setAttribute("data-audioplayer-current-state","play"),E.play()})}),e('[data-audioplayer-control="play-pause"]',t=>{t.addEventListener("click",()=>{E.paused?(E.play(),t.setAttribute("data-audioplayer-current-state","play")):(E.pause(),t.setAttribute("data-audioplayer-current-state","pause"))})}),e('[data-audioplayer-control="prev"]',t=>{t.addEventListener("click",()=>{A=(A-1+L.length)%L.length,r(A)})}),e('[data-audioplayer-control="next"]',t=>{t.addEventListener("click",()=>{A=(A+1)%L.length,r(A)})}),S.value=0,E.addEventListener("timeupdate",u),L.length>0&&a(A),e('[data-audioplayer-control="repeat-playlist"]',t=>{t.addEventListener("click",o)}),e('[data-audioplayer-control="repeat-track"]',t=>{t.addEventListener("click",n)}),e('[data-audioplayer-control="volume"]',t=>{t.addEventListener("click",l)}),e('[data-audioplayer-control="mute-unmute"]',t=>{t.addEventListener("click",d)}),e('[data-audioplayer-control="progress-bar"]',t=>{t.addEventListener("click",c)}),e('[data-audioplayer-control="progress-bar"]',t=>{t.addEventListener("input",t=>{const e=E.duration;if(e>0){const a=t.target.value;E.currentTime=a/100*e}})}),e('[data-audioplayer-control="prev"]',t=>{t.addEventListener("click",()=>{A=(A+L.length)%L.length,r(A)})}),e('[data-audioplayer-control="next"]',t=>{t.addEventListener("click",()=>{A%=L.length,r(A)})}),r(A)}const e=document.querySelectorAll("[data-audioplayer]");e.forEach(e=>{t(e)})})();